# 爬虫示例

这个示例展示了如何使用 jssandbox 实现一个网页爬虫，用于爬取江苏省公共资源交易平台的招标信息。

## 功能说明

- 使用 jssandbox 的浏览器自动化功能（基于 chromedp）
- 自动导航到目标网页
- 等待页面加载完成
- 提取表格中的招标信息（项目名称、标段名称、所在地区、发布时间等）
- 将数据保存为 JSON 文件
- 显示数据预览

## 使用方法

### 1. 编译运行

```bash
cd crawler
go run main.go
```

### 2. 输出

程序会：
- 在控制台显示爬取进度
- 将数据保存到 `bid_info_YYYYMMDD_HHMMSS.json` 文件
- 在控制台显示前5条数据的预览

## 代码说明

### 主要步骤

1. **创建浏览器会话**：使用 `createBrowserSession()` 创建一个浏览器会话
2. **导航到页面**：使用 `session.navigate()` 导航到目标URL
3. **等待页面加载**：使用 `session.wait()` 等待页面完全加载
4. **提取数据**：使用 `session.evaluate()` 在页面中执行JavaScript代码提取表格数据
5. **保存数据**：将提取的数据序列化为JSON并保存到文件

### 数据提取策略

代码实现了多种数据提取策略，按优先级：

1. **表格提取**：查找页面中的 `<table>` 元素，提取表格行数据
2. **链接提取**：如果找不到表格，查找包含招标相关链接的元素
3. **通用提取**：作为备用方案，查找包含关键词（项目、招标、采购、工程）的元素

### 数据结构

每条招标信息包含以下字段：

```json
{
  "index": "序号",
  "project": "项目名称",
  "section": "标段名称",
  "region": "所在地区",
  "publishTime": "发布时间"
}
```

## 注意事项

1. **网络连接**：确保能够访问目标网站
2. **Chrome/Chromium**：需要安装 Chrome 或 Chromium（chromedp 会自动下载）
3. **页面结构变化**：如果网站页面结构发生变化，可能需要调整数据提取的 JavaScript 代码
4. **反爬虫机制**：该网站可能有反爬虫机制，代码中已包含基本的反检测措施

## 自定义

你可以修改以下内容来适应不同的需求：

- **目标URL**：修改 `url` 变量
- **等待时间**：调整 `session.wait()` 的参数
- **数据提取逻辑**：修改 `extractCode` 中的 JavaScript 代码
- **输出格式**：修改 JSON 序列化或添加其他格式输出

## 依赖

- Go 1.21+
- jssandbox-go 库
- Chrome/Chromium（用于浏览器自动化）

